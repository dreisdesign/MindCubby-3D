; Ender 3 V2 - Production End G-Code (active)
; Status: PRODUCTION BASELINE - CURA COMPATIBLE (as of 2025-11-16)
; Purpose: Final retract, park, and cooldown for Cura USB printing

G91 ; Relative positioning
G1 E-2 F2700 ; Retract filament 2mm quickly
G1 E-2 Z0.2 F2400 ; Retract another 2mm and raise Z 0.2mm
G1 Z20 F3000 ; Raise Z axis 20mm total (clear print)

G90 ; Switch back to Absolute positioning
; Park at a safe front-left spot: move bed forward for access
; Z has already been raised to 20mm above print so head is clear
G1 X30 Y200 F5000 ; Park nozzle at front-left (Y200 = bed forward for access)
M106 S0 ; Turn-off cooling fan

; HYBRID COOLDOWN: Signal Cura completion, then auto-reheat for quick reprints
M104 S0 ; Turn-off hotend (signals Cura: print complete)
M140 S0 ; Turn-off bed
G4 P8000 ; Wait 8 seconds (Cura detects completion during this period)
M104 S180 ; Begin reheating nozzle to standby (180°C)
M140 S65 ; Begin reheating bed to standby (65°C)
; NOTE: By the time next print is queued, nozzle/bed are already warming up
; Saves ~1-2 min vs full cooldown-then-preheat cycle